<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="오늘, 당신의 말씀 - Cyber Divine Edition">
    <title>Today's Manna</title>

    <!-- Fonts: Nanum Brush Script (Calligraphy) & Noto Sans KR (Modern) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Nanum+Brush+Script&family=Noto+Sans+KR:wght@100;300;400;700&display=swap"
        rel="stylesheet">

    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('Service Worker Registered!', reg))
                    .catch(err => console.log('Service Worker registration failed: ', err));
            });
        }
    </script>
    <style>
        /* Embed Scanline style directly for performance */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom,
                    rgba(255, 255, 255, 0),
                    rgba(255, 255, 255, 0) 50%,
                    rgba(0, 0, 0, 0.1) 50%,
                    rgba(0, 0, 0, 0.1));
            background-size: 100% 3px;
            z-index: 5;
            pointer-events: none;
            opacity: 0.15;
            animation: scrollLines 8s linear infinite;
        }

        @keyframes scrollLines {
            0% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(6px);
            }
        }

        /* Loading Overlay for FOUC Prevention */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease;
        }

        .loader {
            width: 40px;
            height: 40px;
            border: 2px solid rgba(0, 242, 255, 0.3);
            border-top: 2px solid #00F2FF;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <!-- App Container -->
    <main id="app">
        <!-- FOUC Prevention -->
        <div id="loading-overlay">
            <div class="loader"></div>
        </div>

        <!-- Background Elements -->
        <div class="bg-noise"></div>
        <div class="bg-glow"></div>
        <div class="scanlines"></div>

        <!-- Scene 1: Entry / Touch to Start -->
        <section id="phase-start" class="screen local-active">
            <div class="center-content">
                <div class="logo-area">
                    <!-- Simple CSS Logo -->
                    <div class="cyber-cross"></div>
                </div>
                <div class="breathing-text">
                    <span class="neon-cyan">터치하여</span><br>
                    <span class="neon-gold">말씀 시작하기</span>
                </div>
                <p class="sub-instruction">이어폰 착용을 권장합니다</p>
            </div>
        </section>

        <!-- Scene 2: Immersion / Verse -->
        <section id="phase-verse" class="screen hidden">
            <div class="verse-container">
                <div class="verse-content">
                    <p class="bible-ref neon-cyan">마태복음 11:28</p>
                    <h2 class="calligraphy-text" id="verse-text">
                        수고하고 무거운 짐 진 자들아<br>
                        다 내게로 오라<br>
                        내가 너희를 쉬게 하리라
                    </h2>
                </div>
            </div>
            <!-- Scene 3: Deep Dive Hint -->
            <div class="bottom-hint animate-bounce">
                <div class="chevron-up"></div>
                <span>해석 보기</span>
            </div>
        </section>

        <!-- Scene 3 & 4: Deep Dive & Action (Bottom Sheet) -->
        <div id="bottom-sheet" class="bottom-sheet glass-panel">
            <div class="sheet-handle-bar"></div>
            <div class="sheet-content">
                <h3 class="sheet-title neon-gold">현대적 해석</h3>
                <p class="sheet-text">
                    현대 사회의 끊임없는 경쟁 속에서<br>
                    우리는 '쉼'조차 죄책감을 느끼곤 합니다.<br><br>
                    하지만 진정한 휴식은<br>
                    더 나은 내일을 위한<br>
                    <span class="highlight">거룩한 멈춤</span>입니다.
                </p>

                <!-- Scene 4: Action Card -->
                <div id="action-card" class="action-card hidden">
                    <div class="card-header">
                        <span class="mission-badge">TODAY'S MISSION</span>
                    </div>
                    <p class="mission-text">가장 친한 친구에게<br>"보고 싶다"고 카톡 보내기</p>
                    <button class="action-btn" id="btn-complete">
                        <span class="btn-text">미션 완료</span>
                    </button>
                    <div id="completion-message" class="hidden">
                        <p>평안한 하루 되세요.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audio Controls (FAB) -->
        <button id="audio-toggle" class="fab" aria-label="Toggle Audio">
            <svg class="icon" viewBox="0 0 24 24">
                <path class="audio-on"
                    d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                <path class="audio-off hidden"
                    d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z" />
            </svg>
        </button>
    </main>

    <script src="content_data.js"></script>
    <script src="app.js"></script>
</body>

</html>