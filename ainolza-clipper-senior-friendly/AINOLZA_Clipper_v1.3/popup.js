var qe={exports:{}};(function(i){function n(e,t){if(t&&t.documentElement)e=t,t=arguments[2];else if(!e||!e.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=e,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(r){return r.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._allowedVideoRegex=t.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let r=function(s){if(s.nodeType==s.TEXT_NODE)return`${s.nodeName} ("${s.textContent}")`;let l=Array.from(s.attributes||[],function(o){return`${o.name}="${o.value}"`}).join(" ");return`<${s.localName} ${l}>`};this.log=function(){if(typeof console<"u"){let l=Array.from(arguments,o=>o&&o.nodeType==this.ELEMENT_NODE?r(o):o);l.unshift("Reader: (Readability)"),console.log.apply(console,l)}else if(typeof dump<"u"){var s=Array.prototype.map.call(arguments,function(l){return l&&l.nodeName?r(l):l}).join(" ");dump("Reader: (Readability) "+s+`
`)}}}else this.log=function(){}}n.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(e){this._fixRelativeUris(e),this._simplifyNestedElements(e),this._keepClasses||this._cleanClasses(e)},_removeNodes:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var r=e.length-1;r>=0;r--){var s=e[r],l=s.parentNode;l&&(!t||t.call(this,s,r,e))&&l.removeChild(s)}},_replaceNodeTags:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(const r of e)this._setNodeTag(r,t)},_forEachNode:function(e,t){Array.prototype.forEach.call(e,t,this)},_findNode:function(e,t){return Array.prototype.find.call(e,t,this)},_someNode:function(e,t){return Array.prototype.some.call(e,t,this)},_everyNode:function(e,t){return Array.prototype.every.call(e,t,this)},_concatNodeLists:function(){var e=Array.prototype.slice,t=e.call(arguments),r=t.map(function(s){return e.call(s)});return Array.prototype.concat.apply([],r)},_getAllNodesWithTag:function(e,t){return e.querySelectorAll?e.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(r){var s=e.getElementsByTagName(r);return Array.isArray(s)?s:Array.from(s)}))},_cleanClasses:function(e){var t=this._classesToPreserve,r=(e.getAttribute("class")||"").split(/\s+/).filter(function(s){return t.indexOf(s)!=-1}).join(" ");for(r?e.setAttribute("class",r):e.removeAttribute("class"),e=e.firstElementChild;e;e=e.nextElementSibling)this._cleanClasses(e)},_fixRelativeUris:function(e){var t=this._doc.baseURI,r=this._doc.documentURI;function s(a){if(t==r&&a.charAt(0)=="#")return a;try{return new URL(a,t).href}catch{}return a}var l=this._getAllNodesWithTag(e,["a"]);this._forEachNode(l,function(a){var c=a.getAttribute("href");if(c)if(c.indexOf("javascript:")===0)if(a.childNodes.length===1&&a.childNodes[0].nodeType===this.TEXT_NODE){var u=this._doc.createTextNode(a.textContent);a.parentNode.replaceChild(u,a)}else{for(var h=this._doc.createElement("span");a.firstChild;)h.appendChild(a.firstChild);a.parentNode.replaceChild(h,a)}else a.setAttribute("href",s(c))});var o=this._getAllNodesWithTag(e,["img","picture","figure","video","audio","source"]);this._forEachNode(o,function(a){var c=a.getAttribute("src"),u=a.getAttribute("poster"),h=a.getAttribute("srcset");if(c&&a.setAttribute("src",s(c)),u&&a.setAttribute("poster",s(u)),h){var f=h.replace(this.REGEXPS.srcsetUrl,function(g,y,p,A){return s(y)+(p||"")+A});a.setAttribute("srcset",f)}})},_simplifyNestedElements:function(e){for(var t=e;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&!(t.id&&t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}else if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var r=t.children[0],s=0;s<t.attributes.length;s++)r.setAttribute(t.attributes[s].name,t.attributes[s].value);t.parentNode.replaceChild(r,t),t=r;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var e=this._doc,t="",r="";try{t=r=e.title.trim(),typeof t!="string"&&(t=r=this._getInnerText(e.getElementsByTagName("title")[0]))}catch{}var s=!1;function l(f){return f.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))s=/ [\\\/>»] /.test(t),t=r.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),l(t)<3&&(t=r.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(t.indexOf(": ")!==-1){var o=this._concatNodeLists(e.getElementsByTagName("h1"),e.getElementsByTagName("h2")),a=t.trim(),c=this._someNode(o,function(f){return f.textContent.trim()===a});c||(t=r.substring(r.lastIndexOf(":")+1),l(t)<3?t=r.substring(r.indexOf(":")+1):l(r.substr(0,r.indexOf(":")))>5&&(t=r))}else if(t.length>150||t.length<15){var u=e.getElementsByTagName("h1");u.length===1&&(t=this._getInnerText(u[0]))}t=t.trim().replace(this.REGEXPS.normalize," ");var h=l(t);return h<=4&&(!s||h!=l(r.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=r),t},_prepDocument:function(){var e=this._doc;this._removeNodes(this._getAllNodesWithTag(e,["style"])),e.body&&this._replaceBrs(e.body),this._replaceNodeTags(this._getAllNodesWithTag(e,["font"]),"SPAN")},_nextNode:function(e){for(var t=e;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(e){this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(t){for(var r=t.nextSibling,s=!1;(r=this._nextNode(r))&&r.tagName=="BR";){s=!0;var l=r.nextSibling;r.parentNode.removeChild(r),r=l}if(s){var o=this._doc.createElement("p");for(t.parentNode.replaceChild(o,t),r=o.nextSibling;r;){if(r.tagName=="BR"){var a=this._nextNode(r.nextSibling);if(a&&a.tagName=="BR")break}if(!this._isPhrasingContent(r))break;var c=r.nextSibling;o.appendChild(r),r=c}for(;o.lastChild&&this._isWhitespace(o.lastChild);)o.removeChild(o.lastChild);o.parentNode.tagName==="P"&&this._setNodeTag(o.parentNode,"DIV")}})},_setNodeTag:function(e,t){if(this.log("_setNodeTag",e,t),this._docJSDOMParser)return e.localName=t.toLowerCase(),e.tagName=t.toUpperCase(),e;for(var r=e.ownerDocument.createElement(t);e.firstChild;)r.appendChild(e.firstChild);e.parentNode.replaceChild(r,e),e.readability&&(r.readability=e.readability);for(var s=0;s<e.attributes.length;s++)try{r.setAttribute(e.attributes[s].name,e.attributes[s].value)}catch{}return r},_prepArticle:function(e){this._cleanStyles(e),this._markDataTables(e),this._fixLazyImages(e),this._cleanConditionally(e,"form"),this._cleanConditionally(e,"fieldset"),this._clean(e,"object"),this._clean(e,"embed"),this._clean(e,"footer"),this._clean(e,"link"),this._clean(e,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(e.children,function(r){this._cleanMatchedNodes(r,function(s,l){return this.REGEXPS.shareElements.test(l)&&s.textContent.length<t})}),this._clean(e,"iframe"),this._clean(e,"input"),this._clean(e,"textarea"),this._clean(e,"select"),this._clean(e,"button"),this._cleanHeaders(e),this._cleanConditionally(e,"table"),this._cleanConditionally(e,"ul"),this._cleanConditionally(e,"div"),this._replaceNodeTags(this._getAllNodesWithTag(e,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(e,["p"]),function(r){var s=r.getElementsByTagName("img").length,l=r.getElementsByTagName("embed").length,o=r.getElementsByTagName("object").length,a=r.getElementsByTagName("iframe").length,c=s+l+o+a;return c===0&&!this._getInnerText(r,!1)}),this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(r){var s=this._nextNode(r.nextSibling);s&&s.tagName=="P"&&r.parentNode.removeChild(r)}),this._forEachNode(this._getAllNodesWithTag(e,["table"]),function(r){var s=this._hasSingleTagInsideElement(r,"TBODY")?r.firstElementChild:r;if(this._hasSingleTagInsideElement(s,"TR")){var l=s.firstElementChild;if(this._hasSingleTagInsideElement(l,"TD")){var o=l.firstElementChild;o=this._setNodeTag(o,this._everyNode(o.childNodes,this._isPhrasingContent)?"P":"DIV"),r.parentNode.replaceChild(o,r)}}})},_initializeNode:function(e){switch(e.readability={contentScore:0},e.tagName){case"DIV":e.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5;break}e.readability.contentScore+=this._getClassWeight(e)},_removeAndGetNext:function(e){var t=this._getNextNode(e,!0);return e.parentNode.removeChild(e),t},_getNextNode:function(e,t){if(!t&&e.firstElementChild)return e.firstElementChild;if(e.nextElementSibling)return e.nextElementSibling;do e=e.parentNode;while(e&&!e.nextElementSibling);return e&&e.nextElementSibling},_textSimilarity:function(e,t){var r=e.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),s=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!r.length||!s.length)return 0;var l=s.filter(a=>!r.includes(a)),o=l.join(" ").length/s.join(" ").length;return 1-o},_checkByline:function(e,t){if(this._articleByline)return!1;if(e.getAttribute!==void 0)var r=e.getAttribute("rel"),s=e.getAttribute("itemprop");return(r==="author"||s&&s.indexOf("author")!==-1||this.REGEXPS.byline.test(t))&&this._isValidByline(e.textContent)?(this._articleByline=e.textContent.trim(),!0):!1},_getNodeAncestors:function(e,t){t=t||0;for(var r=0,s=[];e.parentNode&&(s.push(e.parentNode),!(t&&++r===t));)e=e.parentNode;return s},_grabArticle:function(e){this.log("**** grabArticle ****");var t=this._doc,r=e!==null;if(e=e||this._doc.body,!e)return this.log("No body found in document. Abort."),null;for(var s=e.innerHTML;;){this.log("Starting grabArticle loop");var l=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),o=[],a=this._doc.documentElement;let Ve=!0;for(;a;){a.tagName==="HTML"&&(this._articleLang=a.getAttribute("lang"));var c=a.className+" "+a.id;if(!this._isProbablyVisible(a)){this.log("Removing hidden node - "+c),a=this._removeAndGetNext(a);continue}if(a.getAttribute("aria-modal")=="true"&&a.getAttribute("role")=="dialog"){a=this._removeAndGetNext(a);continue}if(this._checkByline(a,c)){a=this._removeAndGetNext(a);continue}if(Ve&&this._headerDuplicatesTitle(a)){this.log("Removing header: ",a.textContent.trim(),this._articleTitle.trim()),Ve=!1,a=this._removeAndGetNext(a);continue}if(l){if(this.REGEXPS.unlikelyCandidates.test(c)&&!this.REGEXPS.okMaybeItsACandidate.test(c)&&!this._hasAncestorTag(a,"table")&&!this._hasAncestorTag(a,"code")&&a.tagName!=="BODY"&&a.tagName!=="A"){this.log("Removing unlikely candidate - "+c),a=this._removeAndGetNext(a);continue}if(this.UNLIKELY_ROLES.includes(a.getAttribute("role"))){this.log("Removing content with role "+a.getAttribute("role")+" - "+c),a=this._removeAndGetNext(a);continue}}if((a.tagName==="DIV"||a.tagName==="SECTION"||a.tagName==="HEADER"||a.tagName==="H1"||a.tagName==="H2"||a.tagName==="H3"||a.tagName==="H4"||a.tagName==="H5"||a.tagName==="H6")&&this._isElementWithoutContent(a)){a=this._removeAndGetNext(a);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(a.tagName)!==-1&&o.push(a),a.tagName==="DIV"){for(var u=null,h=a.firstChild;h;){var f=h.nextSibling;if(this._isPhrasingContent(h))u!==null?u.appendChild(h):this._isWhitespace(h)||(u=t.createElement("p"),a.replaceChild(u,h),u.appendChild(h));else if(u!==null){for(;u.lastChild&&this._isWhitespace(u.lastChild);)u.removeChild(u.lastChild);u=null}h=f}if(this._hasSingleTagInsideElement(a,"P")&&this._getLinkDensity(a)<.25){var g=a.children[0];a.parentNode.replaceChild(g,a),a=g,o.push(a)}else this._hasChildBlockElement(a)||(a=this._setNodeTag(a,"P"),o.push(a))}a=this._getNextNode(a)}var y=[];this._forEachNode(o,function(M){if(!(!M.parentNode||typeof M.parentNode.tagName>"u")){var k=this._getInnerText(M);if(!(k.length<25)){var We=this._getNodeAncestors(M,5);if(We.length!==0){var Z=0;Z+=1,Z+=k.split(this.REGEXPS.commas).length,Z+=Math.min(Math.floor(k.length/100),3),this._forEachNode(We,function(H,ge){if(!(!H.tagName||!H.parentNode||typeof H.parentNode.tagName>"u")){if(typeof H.readability>"u"&&(this._initializeNode(H),y.push(H)),ge===0)var de=1;else ge===1?de=2:de=ge*3;H.readability.contentScore+=Z/de}})}}}});for(var p=[],A=0,_=y.length;A<_;A+=1){var N=y[A],E=N.readability.contentScore*(1-this._getLinkDensity(N));N.readability.contentScore=E,this.log("Candidate:",N,"with score "+E);for(var m=0;m<this._nbTopCandidates;m++){var b=p[m];if(!b||E>b.readability.contentScore){p.splice(m,0,N),p.length>this._nbTopCandidates&&p.pop();break}}}var d=p[0]||null,T=!1,v;if(d===null||d.tagName==="BODY"){for(d=t.createElement("DIV"),T=!0;e.firstChild;)this.log("Moving child out:",e.firstChild),d.appendChild(e.firstChild);e.appendChild(d),this._initializeNode(d)}else if(d){for(var B=[],L=1;L<p.length;L++)p[L].readability.contentScore/d.readability.contentScore>=.75&&B.push(this._getNodeAncestors(p[L]));var D=3;if(B.length>=D)for(v=d.parentNode;v.tagName!=="BODY";){for(var U=0,I=0;I<B.length&&U<D;I++)U+=Number(B[I].includes(v));if(U>=D){d=v;break}v=v.parentNode}d.readability||this._initializeNode(d),v=d.parentNode;for(var ce=d.readability.contentScore,At=ce/3;v.tagName!=="BODY";){if(!v.readability){v=v.parentNode;continue}var Oe=v.readability.contentScore;if(Oe<At)break;if(Oe>ce){d=v;break}ce=v.readability.contentScore,v=v.parentNode}for(v=d.parentNode;v.tagName!="BODY"&&v.children.length==1;)d=v,v=d.parentNode;d.readability||this._initializeNode(d)}var S=t.createElement("DIV");r&&(S.id="readability-content");var Tt=Math.max(10,d.readability.contentScore*.2);v=d.parentNode;for(var ue=v.children,J=0,Ue=ue.length;J<Ue;J++){var w=ue[J],z=!1;if(this.log("Looking at sibling node:",w,w.readability?"with score "+w.readability.contentScore:""),this.log("Sibling has score",w.readability?w.readability.contentScore:"Unknown"),w===d)z=!0;else{var He=0;if(w.className===d.className&&d.className!==""&&(He+=d.readability.contentScore*.2),w.readability&&w.readability.contentScore+He>=Tt)z=!0;else if(w.nodeName==="P"){var Fe=this._getLinkDensity(w),Ge=this._getInnerText(w),he=Ge.length;(he>80&&Fe<.25||he<80&&he>0&&Fe===0&&Ge.search(/\.( |$)/)!==-1)&&(z=!0)}}z&&(this.log("Appending node:",w),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(w.nodeName)===-1&&(this.log("Altering sibling:",w,"to div."),w=this._setNodeTag(w,"DIV")),S.appendChild(w),ue=v.children,J-=1,Ue-=1)}if(this._debug&&this.log("Article content pre-prep: "+S.innerHTML),this._prepArticle(S),this._debug&&this.log("Article content post-prep: "+S.innerHTML),T)d.id="readability-page-1",d.className="page";else{var Q=t.createElement("DIV");for(Q.id="readability-page-1",Q.className="page";S.firstChild;)Q.appendChild(S.firstChild);S.appendChild(Q)}this._debug&&this.log("Article content after paging: "+S.innerHTML);var fe=!0,j=this._getInnerText(S,!0).length;if(j<this._charThreshold)if(fe=!1,e.innerHTML=s,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:S,textLength:j});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:S,textLength:j});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:S,textLength:j});else{if(this._attempts.push({articleContent:S,textLength:j}),this._attempts.sort(function(M,k){return k.textLength-M.textLength}),!this._attempts[0].textLength)return null;S=this._attempts[0].articleContent,fe=!0}if(fe){var wt=[v,d].concat(this._getNodeAncestors(v));return this._someNode(wt,function(M){if(!M.tagName)return!1;var k=M.getAttribute("dir");return k?(this._articleDir=k,!0):!1}),S}}},_isValidByline:function(e){return typeof e=="string"||e instanceof String?(e=e.trim(),e.length>0&&e.length<100):!1},_unescapeHtmlEntities:function(e){if(!e)return e;var t=this.HTML_ESCAPE_MAP;return e.replace(/&(quot|amp|apos|lt|gt);/g,function(r,s){return t[s]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(r,s,l){var o=parseInt(s||l,s?16:10);return String.fromCharCode(o)})},_getJSONLD:function(e){var t=this._getAllNodesWithTag(e,["script"]),r;return this._forEachNode(t,function(s){if(!r&&s.getAttribute("type")==="application/ld+json")try{var l=s.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),o=JSON.parse(l);if(!o["@context"]||!o["@context"].match(/^https?\:\/\/schema\.org$/)||(!o["@type"]&&Array.isArray(o["@graph"])&&(o=o["@graph"].find(function(h){return(h["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!o||!o["@type"]||!o["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(r={},typeof o.name=="string"&&typeof o.headline=="string"&&o.name!==o.headline){var a=this._getArticleTitle(),c=this._textSimilarity(o.name,a)>.75,u=this._textSimilarity(o.headline,a)>.75;u&&!c?r.title=o.headline:r.title=o.name}else typeof o.name=="string"?r.title=o.name.trim():typeof o.headline=="string"&&(r.title=o.headline.trim());o.author&&(typeof o.author.name=="string"?r.byline=o.author.name.trim():Array.isArray(o.author)&&o.author[0]&&typeof o.author[0].name=="string"&&(r.byline=o.author.filter(function(h){return h&&typeof h.name=="string"}).map(function(h){return h.name.trim()}).join(", "))),typeof o.description=="string"&&(r.excerpt=o.description.trim()),o.publisher&&typeof o.publisher.name=="string"&&(r.siteName=o.publisher.name.trim()),typeof o.datePublished=="string"&&(r.datePublished=o.datePublished.trim());return}catch(h){this.log(h.message)}}),r||{}},_getArticleMetadata:function(e){var t={},r={},s=this._doc.getElementsByTagName("meta"),l=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,o=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(s,function(a){var c=a.getAttribute("name"),u=a.getAttribute("property"),h=a.getAttribute("content");if(h){var f=null,g=null;u&&(f=u.match(l),f&&(g=f[0].toLowerCase().replace(/\s/g,""),r[g]=h.trim())),!f&&c&&o.test(c)&&(g=c,h&&(g=g.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),r[g]=h.trim()))}}),t.title=e.title||r["dc:title"]||r["dcterm:title"]||r["og:title"]||r["weibo:article:title"]||r["weibo:webpage:title"]||r.title||r["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=e.byline||r["dc:creator"]||r["dcterm:creator"]||r.author,t.excerpt=e.excerpt||r["dc:description"]||r["dcterm:description"]||r["og:description"]||r["weibo:article:description"]||r["weibo:webpage:description"]||r.description||r["twitter:description"],t.siteName=e.siteName||r["og:site_name"],t.publishedTime=e.datePublished||r["article:published_time"]||null,t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t.publishedTime=this._unescapeHtmlEntities(t.publishedTime),t},_isSingleImage:function(e){return e.tagName==="IMG"?!0:e.children.length!==1||e.textContent.trim()!==""?!1:this._isSingleImage(e.children[0])},_unwrapNoscriptImages:function(e){var t=Array.from(e.getElementsByTagName("img"));this._forEachNode(t,function(s){for(var l=0;l<s.attributes.length;l++){var o=s.attributes[l];switch(o.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(o.value))return}s.parentNode.removeChild(s)});var r=Array.from(e.getElementsByTagName("noscript"));this._forEachNode(r,function(s){var l=e.createElement("div");if(l.innerHTML=s.innerHTML,!!this._isSingleImage(l)){var o=s.previousElementSibling;if(o&&this._isSingleImage(o)){var a=o;a.tagName!=="IMG"&&(a=o.getElementsByTagName("img")[0]);for(var c=l.getElementsByTagName("img")[0],u=0;u<a.attributes.length;u++){var h=a.attributes[u];if(h.value!==""&&(h.name==="src"||h.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(h.value))){if(c.getAttribute(h.name)===h.value)continue;var f=h.name;c.hasAttribute(f)&&(f="data-old-"+f),c.setAttribute(f,h.value)}}s.parentNode.replaceChild(l.firstElementChild,o)}}})},_removeScripts:function(e){this._removeNodes(this._getAllNodesWithTag(e,["script","noscript"]))},_hasSingleTagInsideElement:function(e,t){return e.children.length!=1||e.children[0].tagName!==t?!1:!this._someNode(e.childNodes,function(r){return r.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(r.textContent)})},_isElementWithoutContent:function(e){return e.nodeType===this.ELEMENT_NODE&&e.textContent.trim().length==0&&(e.children.length==0||e.children.length==e.getElementsByTagName("br").length+e.getElementsByTagName("hr").length)},_hasChildBlockElement:function(e){return this._someNode(e.childNodes,function(t){return this.DIV_TO_P_ELEMS.has(t.tagName)||this._hasChildBlockElement(t)})},_isPhrasingContent:function(e){return e.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(e.tagName)!==-1||(e.tagName==="A"||e.tagName==="DEL"||e.tagName==="INS")&&this._everyNode(e.childNodes,this._isPhrasingContent)},_isWhitespace:function(e){return e.nodeType===this.TEXT_NODE&&e.textContent.trim().length===0||e.nodeType===this.ELEMENT_NODE&&e.tagName==="BR"},_getInnerText:function(e,t){t=typeof t>"u"?!0:t;var r=e.textContent.trim();return t?r.replace(this.REGEXPS.normalize," "):r},_getCharCount:function(e,t){return t=t||",",this._getInnerText(e).split(t).length-1},_cleanStyles:function(e){if(!(!e||e.tagName.toLowerCase()==="svg")){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)e.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(e.tagName)!==-1&&(e.removeAttribute("width"),e.removeAttribute("height"));for(var r=e.firstElementChild;r!==null;)this._cleanStyles(r),r=r.nextElementSibling}},_getLinkDensity:function(e){var t=this._getInnerText(e).length;if(t===0)return 0;var r=0;return this._forEachNode(e.getElementsByTagName("a"),function(s){var l=s.getAttribute("href"),o=l&&this.REGEXPS.hashUrl.test(l)?.3:1;r+=this._getInnerText(s).length*o}),r/t},_getClassWeight:function(e){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return typeof e.className=="string"&&e.className!==""&&(this.REGEXPS.negative.test(e.className)&&(t-=25),this.REGEXPS.positive.test(e.className)&&(t+=25)),typeof e.id=="string"&&e.id!==""&&(this.REGEXPS.negative.test(e.id)&&(t-=25),this.REGEXPS.positive.test(e.id)&&(t+=25)),t},_clean:function(e,t){var r=["object","embed","iframe"].indexOf(t)!==-1;this._removeNodes(this._getAllNodesWithTag(e,[t]),function(s){if(r){for(var l=0;l<s.attributes.length;l++)if(this._allowedVideoRegex.test(s.attributes[l].value))return!1;if(s.tagName==="object"&&this._allowedVideoRegex.test(s.innerHTML))return!1}return!0})},_hasAncestorTag:function(e,t,r,s){r=r||3,t=t.toUpperCase();for(var l=0;e.parentNode;){if(r>0&&l>r)return!1;if(e.parentNode.tagName===t&&(!s||s(e.parentNode)))return!0;e=e.parentNode,l++}return!1},_getRowAndColumnCount:function(e){for(var t=0,r=0,s=e.getElementsByTagName("tr"),l=0;l<s.length;l++){var o=s[l].getAttribute("rowspan")||0;o&&(o=parseInt(o,10)),t+=o||1;for(var a=0,c=s[l].getElementsByTagName("td"),u=0;u<c.length;u++){var h=c[u].getAttribute("colspan")||0;h&&(h=parseInt(h,10)),a+=h||1}r=Math.max(r,a)}return{rows:t,columns:r}},_markDataTables:function(e){for(var t=e.getElementsByTagName("table"),r=0;r<t.length;r++){var s=t[r],l=s.getAttribute("role");if(l=="presentation"){s._readabilityDataTable=!1;continue}var o=s.getAttribute("datatable");if(o=="0"){s._readabilityDataTable=!1;continue}var a=s.getAttribute("summary");if(a){s._readabilityDataTable=!0;continue}var c=s.getElementsByTagName("caption")[0];if(c&&c.childNodes.length>0){s._readabilityDataTable=!0;continue}var u=["col","colgroup","tfoot","thead","th"],h=function(g){return!!s.getElementsByTagName(g)[0]};if(u.some(h)){this.log("Data table because found data-y descendant"),s._readabilityDataTable=!0;continue}if(s.getElementsByTagName("table")[0]){s._readabilityDataTable=!1;continue}var f=this._getRowAndColumnCount(s);if(f.rows>=10||f.columns>4){s._readabilityDataTable=!0;continue}s._readabilityDataTable=f.rows*f.columns>10}},_fixLazyImages:function(e){this._forEachNode(this._getAllNodesWithTag(e,["img","picture","figure"]),function(t){if(t.src&&this.REGEXPS.b64DataUrl.test(t.src)){var r=this.REGEXPS.b64DataUrl.exec(t.src);if(r[1]==="image/svg+xml")return;for(var s=!1,l=0;l<t.attributes.length;l++){var o=t.attributes[l];if(o.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(o.value)){s=!0;break}}if(s){var a=t.src.search(/base64\s*/i)+7,c=t.src.length-a;c<133&&t.removeAttribute("src")}}if(!((t.src||t.srcset&&t.srcset!="null")&&t.className.toLowerCase().indexOf("lazy")===-1)){for(var u=0;u<t.attributes.length;u++)if(o=t.attributes[u],!(o.name==="src"||o.name==="srcset"||o.name==="alt")){var h=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(o.value)?h="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(o.value)&&(h="src"),h){if(t.tagName==="IMG"||t.tagName==="PICTURE")t.setAttribute(h,o.value);else if(t.tagName==="FIGURE"&&!this._getAllNodesWithTag(t,["img","picture"]).length){var f=this._doc.createElement("img");f.setAttribute(h,o.value),t.appendChild(f)}}}}})},_getTextDensity:function(e,t){var r=this._getInnerText(e,!0).length;if(r===0)return 0;var s=0,l=this._getAllNodesWithTag(e,t);return this._forEachNode(l,o=>s+=this._getInnerText(o,!0).length),s/r},_cleanConditionally:function(e,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(e,[t]),function(r){var s=function(v){return v._readabilityDataTable},l=t==="ul"||t==="ol";if(!l){var o=0,a=this._getAllNodesWithTag(r,["ul","ol"]);this._forEachNode(a,v=>o+=this._getInnerText(v).length),l=o/this._getInnerText(r).length>.9}if(t==="table"&&s(r)||this._hasAncestorTag(r,"table",-1,s)||this._hasAncestorTag(r,"code"))return!1;var c=this._getClassWeight(r);this.log("Cleaning Conditionally",r);var u=0;if(c+u<0)return!0;if(this._getCharCount(r,",")<10){for(var h=r.getElementsByTagName("p").length,f=r.getElementsByTagName("img").length,g=r.getElementsByTagName("li").length-100,y=r.getElementsByTagName("input").length,p=this._getTextDensity(r,["h1","h2","h3","h4","h5","h6"]),A=0,_=this._getAllNodesWithTag(r,["object","embed","iframe"]),N=0;N<_.length;N++){for(var E=0;E<_[N].attributes.length;E++)if(this._allowedVideoRegex.test(_[N].attributes[E].value))return!1;if(_[N].tagName==="object"&&this._allowedVideoRegex.test(_[N].innerHTML))return!1;A++}var m=this._getLinkDensity(r),b=this._getInnerText(r).length,d=f>1&&h/f<.5&&!this._hasAncestorTag(r,"figure")||!l&&g>h||y>Math.floor(h/3)||!l&&p<.9&&b<25&&(f===0||f>2)&&!this._hasAncestorTag(r,"figure")||!l&&c<25&&m>.2||c>=25&&m>.5||A===1&&b<75||A>1;if(l&&d){for(var T=0;T<r.children.length;T++)if(r.children[T].children.length>1)return d;let v=r.getElementsByTagName("li").length;if(f==v)return!1}return d}return!1})},_cleanMatchedNodes:function(e,t){for(var r=this._getNextNode(e,!0),s=this._getNextNode(e);s&&s!=r;)t.call(this,s,s.className+" "+s.id)?s=this._removeAndGetNext(s):s=this._getNextNode(s)},_cleanHeaders:function(e){let t=this._getAllNodesWithTag(e,["h1","h2"]);this._removeNodes(t,function(r){let s=this._getClassWeight(r)<0;return s&&this.log("Removing header with low class weight:",r),s})},_headerDuplicatesTitle:function(e){if(e.tagName!="H1"&&e.tagName!="H2")return!1;var t=this._getInnerText(e,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(e){return(this._flags&e)>0},_removeFlag:function(e){this._flags=this._flags&~e},_isProbablyVisible:function(e){return(!e.style||e.style.display!="none")&&(!e.style||e.style.visibility!="hidden")&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||e.getAttribute("aria-hidden")!="true"||e.className&&e.className.indexOf&&e.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var e=this._doc.getElementsByTagName("*").length;if(e>this._maxElemsToParse)throw new Error("Aborting parsing document; "+e+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var r=this._getArticleMetadata(t);this._articleTitle=r.title;var s=this._grabArticle();if(!s)return null;if(this.log("Grabbed: "+s.innerHTML),this._postProcessContent(s),!r.excerpt){var l=s.getElementsByTagName("p");l.length>0&&(r.excerpt=l[0].textContent.trim())}var o=s.textContent;return{title:this._articleTitle,byline:r.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(s),textContent:o,length:o.length,excerpt:r.excerpt,siteName:r.siteName||this._articleSiteName,publishedTime:r.publishedTime}}},i.exports=n})(qe);var St=qe.exports,Ct={exports:{}};(function(i){var n={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function e(r){return(!r.style||r.style.display!="none")&&!r.hasAttribute("hidden")&&(!r.hasAttribute("aria-hidden")||r.getAttribute("aria-hidden")!="true"||r.className&&r.className.indexOf&&r.className.indexOf("fallback-image")!==-1)}function t(r,s={}){typeof s=="function"&&(s={visibilityChecker:s});var l={minScore:20,minContentLength:140,visibilityChecker:e};s=Object.assign(l,s);var o=r.querySelectorAll("p, pre, article"),a=r.querySelectorAll("div > br");if(a.length){var c=new Set(o);[].forEach.call(a,function(h){c.add(h.parentNode)}),o=Array.from(c)}var u=0;return[].some.call(o,function(h){if(!s.visibilityChecker(h))return!1;var f=h.className+" "+h.id;if(n.unlikelyCandidates.test(f)&&!n.okMaybeItsACandidate.test(f)||h.matches("li p"))return!1;var g=h.textContent.trim().length;return g<s.minContentLength?!1:(u+=Math.sqrt(g-s.minContentLength),u>s.minScore)})}i.exports=t})(Ct);var Lt=St,Bt={Readability:Lt};function It(i){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])}return i}function Ae(i,n){return Array(n+1).join(i)}function Je(i){return i.replace(/^\n*/,"")}function Qe(i){for(var n=i.length;n>0&&i[n-1]===`
`;)n--;return i.substring(0,n)}function Ze(i){return Qe(Je(i))}var Rt=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Le(i){return Be(i,Rt)}var $e=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function et(i){return Be(i,$e)}function Pt(i){return it(i,$e)}var tt=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Dt(i){return Be(i,tt)}function Mt(i){return it(i,tt)}function Be(i,n){return n.indexOf(i.nodeName)>=0}function it(i,n){return i.getElementsByTagName&&n.some(function(e){return i.getElementsByTagName(e).length})}var C={};C.paragraph={filter:"p",replacement:function(i){return`

`+i+`

`}};C.lineBreak={filter:"br",replacement:function(i,n,e){return e.br+`
`}};C.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(i,n,e){var t=Number(n.nodeName.charAt(1));if(e.headingStyle==="setext"&&t<3){var r=Ae(t===1?"=":"-",i.length);return`

`+i+`
`+r+`

`}else return`

`+Ae("#",t)+" "+i+`

`}};C.blockquote={filter:"blockquote",replacement:function(i){return i=Ze(i).replace(/^/gm,"> "),`

`+i+`

`}};C.list={filter:["ul","ol"],replacement:function(i,n){var e=n.parentNode;return e.nodeName==="LI"&&e.lastElementChild===n?`
`+i:`

`+i+`

`}};C.listItem={filter:"li",replacement:function(i,n,e){var t=e.bulletListMarker+"   ",r=n.parentNode;if(r.nodeName==="OL"){var s=r.getAttribute("start"),l=Array.prototype.indexOf.call(r.children,n);t=(s?Number(s)+l:l+1)+".  "}var o=/\n$/.test(i);return i=Ze(i)+(o?`
`:""),i=i.replace(/\n/gm,`
`+" ".repeat(t.length)),t+i+(n.nextSibling?`
`:"")}};C.indentedCodeBlock={filter:function(i,n){return n.codeBlockStyle==="indented"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,n,e){return`

    `+n.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};C.fencedCodeBlock={filter:function(i,n){return n.codeBlockStyle==="fenced"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,n,e){for(var t=n.firstChild.getAttribute("class")||"",r=(t.match(/language-(\S+)/)||[null,""])[1],s=n.firstChild.textContent,l=e.fence.charAt(0),o=3,a=new RegExp("^"+l+"{3,}","gm"),c;c=a.exec(s);)c[0].length>=o&&(o=c[0].length+1);var u=Ae(l,o);return`

`+u+r+`
`+s.replace(/\n$/,"")+`
`+u+`

`}};C.horizontalRule={filter:"hr",replacement:function(i,n,e){return`

`+e.hr+`

`}};C.inlineLink={filter:function(i,n){return n.linkStyle==="inlined"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,n){var e=n.getAttribute("href");e&&(e=e.replace(/([()])/g,"\\$1"));var t=te(n.getAttribute("title"));return t&&(t=' "'+t.replace(/"/g,'\\"')+'"'),"["+i+"]("+e+t+")"}};C.referenceLink={filter:function(i,n){return n.linkStyle==="referenced"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,n,e){var t=n.getAttribute("href"),r=te(n.getAttribute("title"));r&&(r=' "'+r+'"');var s,l;switch(e.linkReferenceStyle){case"collapsed":s="["+i+"][]",l="["+i+"]: "+t+r;break;case"shortcut":s="["+i+"]",l="["+i+"]: "+t+r;break;default:var o=this.references.length+1;s="["+i+"]["+o+"]",l="["+o+"]: "+t+r}return this.references.push(l),s},references:[],append:function(i){var n="";return this.references.length&&(n=`

`+this.references.join(`
`)+`

`,this.references=[]),n}};C.emphasis={filter:["em","i"],replacement:function(i,n,e){return i.trim()?e.emDelimiter+i+e.emDelimiter:""}};C.strong={filter:["strong","b"],replacement:function(i,n,e){return i.trim()?e.strongDelimiter+i+e.strongDelimiter:""}};C.code={filter:function(i){var n=i.previousSibling||i.nextSibling,e=i.parentNode.nodeName==="PRE"&&!n;return i.nodeName==="CODE"&&!e},replacement:function(i){if(!i)return"";i=i.replace(/\r?\n|\r/g," ");for(var n=/^`|^ .*?[^ ].* $|`$/.test(i)?" ":"",e="`",t=i.match(/`+/gm)||[];t.indexOf(e)!==-1;)e=e+"`";return e+n+i+n+e}};C.image={filter:"img",replacement:function(i,n){var e=te(n.getAttribute("alt")),t=n.getAttribute("src")||"",r=te(n.getAttribute("title")),s=r?' "'+r+'"':"";return t?"!["+e+"]("+t+s+")":""}};function te(i){return i?i.replace(/(\n+\s*)+/g,`
`):""}function rt(i){this.options=i,this._keep=[],this._remove=[],this.blankRule={replacement:i.blankReplacement},this.keepReplacement=i.keepReplacement,this.defaultRule={replacement:i.defaultReplacement},this.array=[];for(var n in i.rules)this.array.push(i.rules[n])}rt.prototype={add:function(i,n){this.array.unshift(n)},keep:function(i){this._keep.unshift({filter:i,replacement:this.keepReplacement})},remove:function(i){this._remove.unshift({filter:i,replacement:function(){return""}})},forNode:function(i){if(i.isBlank)return this.blankRule;var n;return(n=me(this.array,i,this.options))||(n=me(this._keep,i,this.options))||(n=me(this._remove,i,this.options))?n:this.defaultRule},forEach:function(i){for(var n=0;n<this.array.length;n++)i(this.array[n],n)}};function me(i,n,e){for(var t=0;t<i.length;t++){var r=i[t];if(kt(r,n,e))return r}}function kt(i,n,e){var t=i.filter;if(typeof t=="string"){if(t===n.nodeName.toLowerCase())return!0}else if(Array.isArray(t)){if(t.indexOf(n.nodeName.toLowerCase())>-1)return!0}else if(typeof t=="function"){if(t.call(i,n,e))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function xt(i){var n=i.element,e=i.isBlock,t=i.isVoid,r=i.isPre||function(h){return h.nodeName==="PRE"};if(!(!n.firstChild||r(n))){for(var s=null,l=!1,o=null,a=ze(o,n,r);a!==n;){if(a.nodeType===3||a.nodeType===4){var c=a.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!l&&c[0]===" "&&(c=c.substr(1)),!c){a=Ee(a);continue}a.data=c,s=a}else if(a.nodeType===1)e(a)||a.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,l=!1):t(a)||r(a)?(s=null,l=!0):s&&(l=!1);else{a=Ee(a);continue}var u=ze(o,a,r);o=a,a=u}s&&(s.data=s.data.replace(/ $/,""),s.data||Ee(s))}}function Ee(i){var n=i.nextSibling||i.parentNode;return i.parentNode.removeChild(i),n}function ze(i,n,e){return i&&i.parentNode===n||e(n)?n.nextSibling||n.parentNode:n.firstChild||n.nextSibling||n.parentNode}var Ie=typeof window<"u"?window:{};function Ot(){var i=Ie.DOMParser,n=!1;try{new i().parseFromString("","text/html")&&(n=!0)}catch{}return n}function Ut(){var i=function(){};return Ht()?i.prototype.parseFromString=function(n){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(n),e.close(),e}:i.prototype.parseFromString=function(n){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(n),e.close(),e},i}function Ht(){var i=!1;try{document.implementation.createHTMLDocument("").open()}catch{Ie.ActiveXObject&&(i=!0)}return i}var Ft=Ot()?Ie.DOMParser:Ut();function Gt(i,n){var e;if(typeof i=="string"){var t=Vt().parseFromString('<x-turndown id="turndown-root">'+i+"</x-turndown>","text/html");e=t.getElementById("turndown-root")}else e=i.cloneNode(!0);return xt({element:e,isBlock:Le,isVoid:et,isPre:n.preformattedCode?Wt:null}),e}var ye;function Vt(){return ye=ye||new Ft,ye}function Wt(i){return i.nodeName==="PRE"||i.nodeName==="CODE"}function zt(i,n){return i.isBlock=Le(i),i.isCode=i.nodeName==="CODE"||i.parentNode.isCode,i.isBlank=jt(i),i.flankingWhitespace=Yt(i,n),i}function jt(i){return!et(i)&&!Dt(i)&&/^\s*$/i.test(i.textContent)&&!Pt(i)&&!Mt(i)}function Yt(i,n){if(i.isBlock||n.preformattedCode&&i.isCode)return{leading:"",trailing:""};var e=Xt(i.textContent);return e.leadingAscii&&je("left",i,n)&&(e.leading=e.leadingNonAscii),e.trailingAscii&&je("right",i,n)&&(e.trailing=e.trailingNonAscii),{leading:e.leading,trailing:e.trailing}}function Xt(i){var n=i.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:n[1],leadingAscii:n[2],leadingNonAscii:n[3],trailing:n[4],trailingNonAscii:n[5],trailingAscii:n[6]}}function je(i,n,e){var t,r,s;return i==="left"?(t=n.previousSibling,r=/ $/):(t=n.nextSibling,r=/^ /),t&&(t.nodeType===3?s=r.test(t.nodeValue):e.preformattedCode&&t.nodeName==="CODE"?s=!1:t.nodeType===1&&!Le(t)&&(s=r.test(t.textContent))),s}var Kt=Array.prototype.reduce,qt=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function ie(i){if(!(this instanceof ie))return new ie(i);var n={rules:C,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?`

`:""},keepReplacement:function(e,t){return t.isBlock?`

`+t.outerHTML+`

`:t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?`

`+e+`

`:e}};this.options=It({},n,i),this.rules=new rt(this.options)}ie.prototype={turndown:function(i){if(!Zt(i))throw new TypeError(i+" is not a string, or an element/document/fragment node.");if(i==="")return"";var n=nt.call(this,new Gt(i,this.options));return Jt.call(this,n)},use:function(i){if(Array.isArray(i))for(var n=0;n<i.length;n++)this.use(i[n]);else if(typeof i=="function")i(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(i,n){return this.rules.add(i,n),this},keep:function(i){return this.rules.keep(i),this},remove:function(i){return this.rules.remove(i),this},escape:function(i){return qt.reduce(function(n,e){return n.replace(e[0],e[1])},i)}};function nt(i){var n=this;return Kt.call(i.childNodes,function(e,t){t=new zt(t,n.options);var r="";return t.nodeType===3?r=t.isCode?t.nodeValue:n.escape(t.nodeValue):t.nodeType===1&&(r=Qt.call(n,t)),st(e,r)},"")}function Jt(i){var n=this;return this.rules.forEach(function(e){typeof e.append=="function"&&(i=st(i,e.append(n.options)))}),i.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Qt(i){var n=this.rules.forNode(i),e=nt.call(this,i),t=i.flankingWhitespace;return(t.leading||t.trailing)&&(e=e.trim()),t.leading+n.replacement(e,i,this.options)+t.trailing}function st(i,n){var e=Qe(i),t=Je(n),r=Math.max(i.length-e.length,n.length-t.length),s=`

`.substring(0,r);return e+s+t}function Zt(i){return i!=null&&(typeof i=="string"||i.nodeType&&(i.nodeType===1||i.nodeType===9||i.nodeType===11))}var K={},$t=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},at={},R={};let Re;const ei=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];R.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};R.getSymbolTotalCodewords=function(n){return ei[n]};R.getBCHDigit=function(i){let n=0;for(;i!==0;)n++,i>>>=1;return n};R.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');Re=n};R.isKanjiModeEnabled=function(){return typeof Re<"u"};R.toSJIS=function(n){return Re(n)};var se={};(function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function n(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+e)}}i.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4},i.from=function(t,r){if(i.isValid(t))return t;try{return n(t)}catch{return r}}})(se);function ot(){this.buffer=[],this.length=0}ot.prototype={get:function(i){const n=Math.floor(i/8);return(this.buffer[n]>>>7-i%8&1)===1},put:function(i,n){for(let e=0;e<n;e++)this.putBit((i>>>n-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),i&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var ti=ot;function q(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}q.prototype.set=function(i,n,e,t){const r=i*this.size+n;this.data[r]=e,t&&(this.reservedBit[r]=!0)};q.prototype.get=function(i,n){return this.data[i*this.size+n]};q.prototype.xor=function(i,n,e){this.data[i*this.size+n]^=e};q.prototype.isReserved=function(i,n){return this.reservedBit[i*this.size+n]};var ii=q,lt={};(function(i){const n=R.getSymbolSize;i.getRowColCoords=function(t){if(t===1)return[];const r=Math.floor(t/7)+2,s=n(t),l=s===145?26:Math.ceil((s-13)/(2*r-2))*2,o=[s-7];for(let a=1;a<r-1;a++)o[a]=o[a-1]-l;return o.push(6),o.reverse()},i.getPositions=function(t){const r=[],s=i.getRowColCoords(t),l=s.length;for(let o=0;o<l;o++)for(let a=0;a<l;a++)o===0&&a===0||o===0&&a===l-1||o===l-1&&a===0||r.push([s[o],s[a]]);return r}})(lt);var ct={};const ri=R.getSymbolSize,Ye=7;ct.getPositions=function(n){const e=ri(n);return[[0,0],[e-Ye,0],[0,e-Ye]]};var ut={};(function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};i.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},i.from=function(r){return i.isValid(r)?parseInt(r,10):void 0},i.getPenaltyN1=function(r){const s=r.size;let l=0,o=0,a=0,c=null,u=null;for(let h=0;h<s;h++){o=a=0,c=u=null;for(let f=0;f<s;f++){let g=r.get(h,f);g===c?o++:(o>=5&&(l+=n.N1+(o-5)),c=g,o=1),g=r.get(f,h),g===u?a++:(a>=5&&(l+=n.N1+(a-5)),u=g,a=1)}o>=5&&(l+=n.N1+(o-5)),a>=5&&(l+=n.N1+(a-5))}return l},i.getPenaltyN2=function(r){const s=r.size;let l=0;for(let o=0;o<s-1;o++)for(let a=0;a<s-1;a++){const c=r.get(o,a)+r.get(o,a+1)+r.get(o+1,a)+r.get(o+1,a+1);(c===4||c===0)&&l++}return l*n.N2},i.getPenaltyN3=function(r){const s=r.size;let l=0,o=0,a=0;for(let c=0;c<s;c++){o=a=0;for(let u=0;u<s;u++)o=o<<1&2047|r.get(c,u),u>=10&&(o===1488||o===93)&&l++,a=a<<1&2047|r.get(u,c),u>=10&&(a===1488||a===93)&&l++}return l*n.N3},i.getPenaltyN4=function(r){let s=0;const l=r.data.length;for(let a=0;a<l;a++)s+=r.data[a];return Math.abs(Math.ceil(s*100/l/5)-10)*n.N4};function e(t,r,s){switch(t){case i.Patterns.PATTERN000:return(r+s)%2===0;case i.Patterns.PATTERN001:return r%2===0;case i.Patterns.PATTERN010:return s%3===0;case i.Patterns.PATTERN011:return(r+s)%3===0;case i.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(s/3))%2===0;case i.Patterns.PATTERN101:return r*s%2+r*s%3===0;case i.Patterns.PATTERN110:return(r*s%2+r*s%3)%2===0;case i.Patterns.PATTERN111:return(r*s%3+(r+s)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}i.applyMask=function(r,s){const l=s.size;for(let o=0;o<l;o++)for(let a=0;a<l;a++)s.isReserved(a,o)||s.xor(a,o,e(r,a,o))},i.getBestMask=function(r,s){const l=Object.keys(i.Patterns).length;let o=0,a=1/0;for(let c=0;c<l;c++){s(c),i.applyMask(c,r);const u=i.getPenaltyN1(r)+i.getPenaltyN2(r)+i.getPenaltyN3(r)+i.getPenaltyN4(r);i.applyMask(c,r),u<a&&(a=u,o=c)}return o}})(ut);var ae={};const x=se,$=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ee=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ae.getBlocksCount=function(n,e){switch(e){case x.L:return $[(n-1)*4+0];case x.M:return $[(n-1)*4+1];case x.Q:return $[(n-1)*4+2];case x.H:return $[(n-1)*4+3];default:return}};ae.getTotalCodewordsCount=function(n,e){switch(e){case x.L:return ee[(n-1)*4+0];case x.M:return ee[(n-1)*4+1];case x.Q:return ee[(n-1)*4+2];case x.H:return ee[(n-1)*4+3];default:return}};var ht={},oe={};const Y=new Uint8Array(512),re=new Uint8Array(256);(function(){let n=1;for(let e=0;e<255;e++)Y[e]=n,re[n]=e,n<<=1,n&256&&(n^=285);for(let e=255;e<512;e++)Y[e]=Y[e-255]})();oe.log=function(n){if(n<1)throw new Error("log("+n+")");return re[n]};oe.exp=function(n){return Y[n]};oe.mul=function(n,e){return n===0||e===0?0:Y[re[n]+re[e]]};(function(i){const n=oe;i.mul=function(t,r){const s=new Uint8Array(t.length+r.length-1);for(let l=0;l<t.length;l++)for(let o=0;o<r.length;o++)s[l+o]^=n.mul(t[l],r[o]);return s},i.mod=function(t,r){let s=new Uint8Array(t);for(;s.length-r.length>=0;){const l=s[0];for(let a=0;a<r.length;a++)s[a]^=n.mul(r[a],l);let o=0;for(;o<s.length&&s[o]===0;)o++;s=s.slice(o)}return s},i.generateECPolynomial=function(t){let r=new Uint8Array([1]);for(let s=0;s<t;s++)r=i.mul(r,new Uint8Array([1,n.exp(s)]));return r}})(ht);const ft=ht;function Pe(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}Pe.prototype.initialize=function(n){this.degree=n,this.genPoly=ft.generateECPolynomial(this.degree)};Pe.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(n.length+this.degree);e.set(n);const t=ft.mod(e,this.genPoly),r=this.degree-t.length;if(r>0){const s=new Uint8Array(this.degree);return s.set(t,r),s}return t};var ni=Pe,gt={},O={},De={};De.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var P={};const dt="[0-9]+",si="[A-Z $%*+\\-./:]+";let X="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";X=X.replace(/u/g,"\\u");const ai="(?:(?![A-Z0-9 $%*+\\-./:]|"+X+`)(?:.|[\r
]))+`;P.KANJI=new RegExp(X,"g");P.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");P.BYTE=new RegExp(ai,"g");P.NUMERIC=new RegExp(dt,"g");P.ALPHANUMERIC=new RegExp(si,"g");const oi=new RegExp("^"+X+"$"),li=new RegExp("^"+dt+"$"),ci=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");P.testKanji=function(n){return oi.test(n)};P.testNumeric=function(n){return li.test(n)};P.testAlphanumeric=function(n){return ci.test(n)};(function(i){const n=De,e=P;i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(s,l){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!n.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?s.ccBits[0]:l<27?s.ccBits[1]:s.ccBits[2]},i.getBestModeForData=function(s){return e.testNumeric(s)?i.NUMERIC:e.testAlphanumeric(s)?i.ALPHANUMERIC:e.testKanji(s)?i.KANJI:i.BYTE},i.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},i.isValid=function(s){return s&&s.bit&&s.ccBits};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+r)}}i.from=function(s,l){if(i.isValid(s))return s;try{return t(s)}catch{return l}}})(O);(function(i){const n=R,e=ae,t=se,r=O,s=De,l=7973,o=n.getBCHDigit(l);function a(f,g,y){for(let p=1;p<=40;p++)if(g<=i.getCapacity(p,y,f))return p}function c(f,g){return r.getCharCountIndicator(f,g)+4}function u(f,g){let y=0;return f.forEach(function(p){const A=c(p.mode,g);y+=A+p.getBitsLength()}),y}function h(f,g){for(let y=1;y<=40;y++)if(u(f,y)<=i.getCapacity(y,g,r.MIXED))return y}i.from=function(g,y){return s.isValid(g)?parseInt(g,10):y},i.getCapacity=function(g,y,p){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=r.BYTE);const A=n.getSymbolTotalCodewords(g),_=e.getTotalCodewordsCount(g,y),N=(A-_)*8;if(p===r.MIXED)return N;const E=N-c(p,g);switch(p){case r.NUMERIC:return Math.floor(E/10*3);case r.ALPHANUMERIC:return Math.floor(E/11*2);case r.KANJI:return Math.floor(E/13);case r.BYTE:default:return Math.floor(E/8)}},i.getBestVersionForData=function(g,y){let p;const A=t.from(y,t.M);if(Array.isArray(g)){if(g.length>1)return h(g,A);if(g.length===0)return 1;p=g[0]}else p=g;return a(p.mode,p.getLength(),A)},i.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let y=g<<12;for(;n.getBCHDigit(y)-o>=0;)y^=l<<n.getBCHDigit(y)-o;return g<<12|y}})(gt);var mt={};const Te=R,Et=1335,ui=21522,Xe=Te.getBCHDigit(Et);mt.getEncodedBits=function(n,e){const t=n.bit<<3|e;let r=t<<10;for(;Te.getBCHDigit(r)-Xe>=0;)r^=Et<<Te.getBCHDigit(r)-Xe;return(t<<10|r)^ui};var yt={};const hi=O;function F(i){this.mode=hi.NUMERIC,this.data=i.toString()}F.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};F.prototype.getLength=function(){return this.data.length};F.prototype.getBitsLength=function(){return F.getBitsLength(this.data.length)};F.prototype.write=function(n){let e,t,r;for(e=0;e+3<=this.data.length;e+=3)t=this.data.substr(e,3),r=parseInt(t,10),n.put(r,10);const s=this.data.length-e;s>0&&(t=this.data.substr(e),r=parseInt(t,10),n.put(r,s*3+1))};var fi=F;const gi=O,_e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function G(i){this.mode=gi.ALPHANUMERIC,this.data=i}G.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};G.prototype.getLength=function(){return this.data.length};G.prototype.getBitsLength=function(){return G.getBitsLength(this.data.length)};G.prototype.write=function(n){let e;for(e=0;e+2<=this.data.length;e+=2){let t=_e.indexOf(this.data[e])*45;t+=_e.indexOf(this.data[e+1]),n.put(t,11)}this.data.length%2&&n.put(_e.indexOf(this.data[e]),6)};var di=G;const mi=O;function V(i){this.mode=mi.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}V.getBitsLength=function(n){return n*8};V.prototype.getLength=function(){return this.data.length};V.prototype.getBitsLength=function(){return V.getBitsLength(this.data.length)};V.prototype.write=function(i){for(let n=0,e=this.data.length;n<e;n++)i.put(this.data[n],8)};var Ei=V;const yi=O,_i=R;function W(i){this.mode=yi.KANJI,this.data=i}W.getBitsLength=function(n){return n*13};W.prototype.getLength=function(){return this.data.length};W.prototype.getBitsLength=function(){return W.getBitsLength(this.data.length)};W.prototype.write=function(i){let n;for(n=0;n<this.data.length;n++){let e=_i.toSJIS(this.data[n]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),i.put(e,13)}};var pi=W,_t={exports:{}};(function(i){var n={single_source_shortest_paths:function(e,t,r){var s={},l={};l[t]=0;var o=n.PriorityQueue.make();o.push(t,0);for(var a,c,u,h,f,g,y,p,A;!o.empty();){a=o.pop(),c=a.value,h=a.cost,f=e[c]||{};for(u in f)f.hasOwnProperty(u)&&(g=f[u],y=h+g,p=l[u],A=typeof l[u]>"u",(A||p>y)&&(l[u]=y,o.push(u,y),s[u]=c))}if(typeof r<"u"&&typeof l[r]>"u"){var _=["Could not find a path from ",t," to ",r,"."].join("");throw new Error(_)}return s},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],s=t;s;)r.push(s),e[s],s=e[s];return r.reverse(),r},find_path:function(e,t,r){var s=n.single_source_shortest_paths(e,t,r);return n.extract_shortest_path_from_predecessor_list(s,r)},PriorityQueue:{make:function(e){var t=n.PriorityQueue,r={},s;e=e||{};for(s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);return r.queue=[],r.sorter=e.sorter||t.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var r={value:e,cost:t};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=n})(_t);var Ni=_t.exports;(function(i){const n=O,e=fi,t=di,r=Ei,s=pi,l=P,o=R,a=Ni;function c(_){return unescape(encodeURIComponent(_)).length}function u(_,N,E){const m=[];let b;for(;(b=_.exec(E))!==null;)m.push({data:b[0],index:b.index,mode:N,length:b[0].length});return m}function h(_){const N=u(l.NUMERIC,n.NUMERIC,_),E=u(l.ALPHANUMERIC,n.ALPHANUMERIC,_);let m,b;return o.isKanjiModeEnabled()?(m=u(l.BYTE,n.BYTE,_),b=u(l.KANJI,n.KANJI,_)):(m=u(l.BYTE_KANJI,n.BYTE,_),b=[]),N.concat(E,m,b).sort(function(T,v){return T.index-v.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function f(_,N){switch(N){case n.NUMERIC:return e.getBitsLength(_);case n.ALPHANUMERIC:return t.getBitsLength(_);case n.KANJI:return s.getBitsLength(_);case n.BYTE:return r.getBitsLength(_)}}function g(_){return _.reduce(function(N,E){const m=N.length-1>=0?N[N.length-1]:null;return m&&m.mode===E.mode?(N[N.length-1].data+=E.data,N):(N.push(E),N)},[])}function y(_){const N=[];for(let E=0;E<_.length;E++){const m=_[E];switch(m.mode){case n.NUMERIC:N.push([m,{data:m.data,mode:n.ALPHANUMERIC,length:m.length},{data:m.data,mode:n.BYTE,length:m.length}]);break;case n.ALPHANUMERIC:N.push([m,{data:m.data,mode:n.BYTE,length:m.length}]);break;case n.KANJI:N.push([m,{data:m.data,mode:n.BYTE,length:c(m.data)}]);break;case n.BYTE:N.push([{data:m.data,mode:n.BYTE,length:c(m.data)}])}}return N}function p(_,N){const E={},m={start:{}};let b=["start"];for(let d=0;d<_.length;d++){const T=_[d],v=[];for(let B=0;B<T.length;B++){const L=T[B],D=""+d+B;v.push(D),E[D]={node:L,lastCount:0},m[D]={};for(let U=0;U<b.length;U++){const I=b[U];E[I]&&E[I].node.mode===L.mode?(m[I][D]=f(E[I].lastCount+L.length,L.mode)-f(E[I].lastCount,L.mode),E[I].lastCount+=L.length):(E[I]&&(E[I].lastCount=L.length),m[I][D]=f(L.length,L.mode)+4+n.getCharCountIndicator(L.mode,N))}}b=v}for(let d=0;d<b.length;d++)m[b[d]].end=0;return{map:m,table:E}}function A(_,N){let E;const m=n.getBestModeForData(_);if(E=n.from(N,m),E!==n.BYTE&&E.bit<m.bit)throw new Error('"'+_+'" cannot be encoded with mode '+n.toString(E)+`.
 Suggested mode is: `+n.toString(m));switch(E===n.KANJI&&!o.isKanjiModeEnabled()&&(E=n.BYTE),E){case n.NUMERIC:return new e(_);case n.ALPHANUMERIC:return new t(_);case n.KANJI:return new s(_);case n.BYTE:return new r(_)}}i.fromArray=function(N){return N.reduce(function(E,m){return typeof m=="string"?E.push(A(m,null)):m.data&&E.push(A(m.data,m.mode)),E},[])},i.fromString=function(N,E){const m=h(N,o.isKanjiModeEnabled()),b=y(m),d=p(b,E),T=a.find_path(d.map,"start","end"),v=[];for(let B=1;B<T.length-1;B++)v.push(d.table[T[B]].node);return i.fromArray(g(v))},i.rawSplit=function(N){return i.fromArray(h(N,o.isKanjiModeEnabled()))}})(yt);const le=R,pe=se,vi=ti,bi=ii,Ai=lt,Ti=ct,we=ut,Se=ae,wi=ni,ne=gt,Si=mt,Ci=O,Ne=yt;function Li(i,n){const e=i.size,t=Ti.getPositions(n);for(let r=0;r<t.length;r++){const s=t[r][0],l=t[r][1];for(let o=-1;o<=7;o++)if(!(s+o<=-1||e<=s+o))for(let a=-1;a<=7;a++)l+a<=-1||e<=l+a||(o>=0&&o<=6&&(a===0||a===6)||a>=0&&a<=6&&(o===0||o===6)||o>=2&&o<=4&&a>=2&&a<=4?i.set(s+o,l+a,!0,!0):i.set(s+o,l+a,!1,!0))}}function Bi(i){const n=i.size;for(let e=8;e<n-8;e++){const t=e%2===0;i.set(e,6,t,!0),i.set(6,e,t,!0)}}function Ii(i,n){const e=Ai.getPositions(n);for(let t=0;t<e.length;t++){const r=e[t][0],s=e[t][1];for(let l=-2;l<=2;l++)for(let o=-2;o<=2;o++)l===-2||l===2||o===-2||o===2||l===0&&o===0?i.set(r+l,s+o,!0,!0):i.set(r+l,s+o,!1,!0)}}function Ri(i,n){const e=i.size,t=ne.getEncodedBits(n);let r,s,l;for(let o=0;o<18;o++)r=Math.floor(o/3),s=o%3+e-8-3,l=(t>>o&1)===1,i.set(r,s,l,!0),i.set(s,r,l,!0)}function ve(i,n,e){const t=i.size,r=Si.getEncodedBits(n,e);let s,l;for(s=0;s<15;s++)l=(r>>s&1)===1,s<6?i.set(s,8,l,!0):s<8?i.set(s+1,8,l,!0):i.set(t-15+s,8,l,!0),s<8?i.set(8,t-s-1,l,!0):s<9?i.set(8,15-s-1+1,l,!0):i.set(8,15-s-1,l,!0);i.set(t-8,8,1,!0)}function Pi(i,n){const e=i.size;let t=-1,r=e-1,s=7,l=0;for(let o=e-1;o>0;o-=2)for(o===6&&o--;;){for(let a=0;a<2;a++)if(!i.isReserved(r,o-a)){let c=!1;l<n.length&&(c=(n[l]>>>s&1)===1),i.set(r,o-a,c),s--,s===-1&&(l++,s=7)}if(r+=t,r<0||e<=r){r-=t,t=-t;break}}}function Di(i,n,e){const t=new vi;e.forEach(function(a){t.put(a.mode.bit,4),t.put(a.getLength(),Ci.getCharCountIndicator(a.mode,i)),a.write(t)});const r=le.getSymbolTotalCodewords(i),s=Se.getTotalCodewordsCount(i,n),l=(r-s)*8;for(t.getLengthInBits()+4<=l&&t.put(0,4);t.getLengthInBits()%8!==0;)t.putBit(0);const o=(l-t.getLengthInBits())/8;for(let a=0;a<o;a++)t.put(a%2?17:236,8);return Mi(t,i,n)}function Mi(i,n,e){const t=le.getSymbolTotalCodewords(n),r=Se.getTotalCodewordsCount(n,e),s=t-r,l=Se.getBlocksCount(n,e),o=t%l,a=l-o,c=Math.floor(t/l),u=Math.floor(s/l),h=u+1,f=c-u,g=new wi(f);let y=0;const p=new Array(l),A=new Array(l);let _=0;const N=new Uint8Array(i.buffer);for(let T=0;T<l;T++){const v=T<a?u:h;p[T]=N.slice(y,y+v),A[T]=g.encode(p[T]),y+=v,_=Math.max(_,v)}const E=new Uint8Array(t);let m=0,b,d;for(b=0;b<_;b++)for(d=0;d<l;d++)b<p[d].length&&(E[m++]=p[d][b]);for(b=0;b<f;b++)for(d=0;d<l;d++)E[m++]=A[d][b];return E}function ki(i,n,e,t){let r;if(Array.isArray(i))r=Ne.fromArray(i);else if(typeof i=="string"){let c=n;if(!c){const u=Ne.rawSplit(i);c=ne.getBestVersionForData(u,e)}r=Ne.fromString(i,c||40)}else throw new Error("Invalid data");const s=ne.getBestVersionForData(r,e);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=s;else if(n<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const l=Di(n,e,r),o=le.getSymbolSize(n),a=new bi(o);return Li(a,n),Bi(a),Ii(a,n),ve(a,e,0),n>=7&&Ri(a,n),Pi(a,l),isNaN(t)&&(t=we.getBestMask(a,ve.bind(null,a,e))),we.applyMask(t,a),ve(a,e,t),{modules:a,version:n,errorCorrectionLevel:e,maskPattern:t,segments:r}}at.create=function(n,e){if(typeof n>"u"||n==="")throw new Error("No input text");let t=pe.M,r,s;return typeof e<"u"&&(t=pe.from(e.errorCorrectionLevel,pe.M),r=ne.from(e.version),s=we.from(e.maskPattern),e.toSJISFunc&&le.setToSJISFunction(e.toSJISFunc)),ki(n,r,t,s)};var pt={},Me={};(function(i){function n(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+e);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(s){return[s,s]}))),t.length===6&&t.push("F","F");const r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+t.slice(0,6).join("")}}i.getOptions=function(t){t||(t={}),t.color||(t.color={});const r=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,s=t.width&&t.width>=21?t.width:void 0,l=t.scale||4;return{width:s,scale:s?4:l,margin:r,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},i.getScale=function(t,r){return r.width&&r.width>=t+r.margin*2?r.width/(t+r.margin*2):r.scale},i.getImageWidth=function(t,r){const s=i.getScale(t,r);return Math.floor((t+r.margin*2)*s)},i.qrToImageData=function(t,r,s){const l=r.modules.size,o=r.modules.data,a=i.getScale(l,s),c=Math.floor((l+s.margin*2)*a),u=s.margin*a,h=[s.color.light,s.color.dark];for(let f=0;f<c;f++)for(let g=0;g<c;g++){let y=(f*c+g)*4,p=s.color.light;if(f>=u&&g>=u&&f<c-u&&g<c-u){const A=Math.floor((f-u)/a),_=Math.floor((g-u)/a);p=h[o[A*l+_]?1:0]}t[y++]=p.r,t[y++]=p.g,t[y++]=p.b,t[y]=p.a}}})(Me);(function(i){const n=Me;function e(r,s,l){r.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=l,s.width=l,s.style.height=l+"px",s.style.width=l+"px"}function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(s,l,o){let a=o,c=l;typeof a>"u"&&(!l||!l.getContext)&&(a=l,l=void 0),l||(c=t()),a=n.getOptions(a);const u=n.getImageWidth(s.modules.size,a),h=c.getContext("2d"),f=h.createImageData(u,u);return n.qrToImageData(f.data,s,a),e(h,c,u),h.putImageData(f,0,0),c},i.renderToDataURL=function(s,l,o){let a=o;typeof a>"u"&&(!l||!l.getContext)&&(a=l,l=void 0),a||(a={});const c=i.render(s,l,a),u=a.type||"image/png",h=a.rendererOpts||{};return c.toDataURL(u,h.quality)}})(pt);var Nt={};const xi=Me;function Ke(i,n){const e=i.a/255,t=n+'="'+i.hex+'"';return e<1?t+" "+n+'-opacity="'+e.toFixed(2).slice(1)+'"':t}function be(i,n,e){let t=i+n;return typeof e<"u"&&(t+=" "+e),t}function Oi(i,n,e){let t="",r=0,s=!1,l=0;for(let o=0;o<i.length;o++){const a=Math.floor(o%n),c=Math.floor(o/n);!a&&!s&&(s=!0),i[o]?(l++,o>0&&a>0&&i[o-1]||(t+=s?be("M",a+e,.5+c+e):be("m",r,0),r=0,s=!1),a+1<n&&i[o+1]||(t+=be("h",l),l=0)):r++}return t}Nt.render=function(n,e,t){const r=xi.getOptions(e),s=n.modules.size,l=n.modules.data,o=s+r.margin*2,a=r.color.light.a?"<path "+Ke(r.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",c="<path "+Ke(r.color.dark,"stroke")+' d="'+Oi(l,s,r.margin)+'"/>',u='viewBox="0 0 '+o+" "+o+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+u+' shape-rendering="crispEdges">'+a+c+`</svg>
`;return typeof t=="function"&&t(null,f),f};const Ui=$t,Ce=at,vt=pt,Hi=Nt;function ke(i,n,e,t,r){const s=[].slice.call(arguments,1),l=s.length,o=typeof s[l-1]=="function";if(!o&&!Ui())throw new Error("Callback required as last argument");if(o){if(l<2)throw new Error("Too few arguments provided");l===2?(r=e,e=n,n=t=void 0):l===3&&(n.getContext&&typeof r>"u"?(r=t,t=void 0):(r=t,t=e,e=n,n=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(e=n,n=t=void 0):l===2&&!n.getContext&&(t=e,e=n,n=void 0),new Promise(function(a,c){try{const u=Ce.create(e,t);a(i(u,n,t))}catch(u){c(u)}})}try{const a=Ce.create(e,t);r(null,i(a,n,t))}catch(a){r(a)}}K.create=Ce.create;K.toCanvas=ke.bind(null,vt.render);K.toDataURL=ke.bind(null,vt.renderToDataURL);K.toString=ke.bind(null,function(i,n,e){return Hi.render(i,e)});chrome.runtime.sendMessage({action:"getAppStatus"},i=>{i&&(i.active||i.updateRequired)?(document.getElementById("restrictedSection").style.display="block",document.getElementById("onboardingSection").style.display="none",document.getElementById("cartSection").style.display="none",document.querySelectorAll("button").forEach(n=>n.style.display="none"),document.querySelector(".divider").style.display="none",i.message&&(document.getElementById("restrictedMessage").innerText=i.message),i.link&&(document.getElementById("updateLink").href=i.link)):xe()});function xe(){chrome.storage.local.get(["collectedLinks"],i=>{const n=i.collectedLinks||[],e=n.length,t=document.getElementById("onboardingSection"),r=document.getElementById("cartSection"),s=document.getElementById("cartCount"),l=document.getElementById("linkList");e>0?(t.style.display="none",r.style.display="block",s.innerText=e,l.innerHTML=n.map((o,a)=>{const c=o.split("v=")[1]||o;return`
                    <div class="link-item">
                        <span class="link-text" title="${o}">${c}</span>
                        <button class="delete-btn" data-index="${a}" title="삭제">×</button>
                    </div>
                `}).join(""),l.querySelectorAll(".delete-btn").forEach(o=>{o.addEventListener("click",a=>{const c=parseInt(a.target.dataset.index);Fi(c)})})):(t.style.display="block",r.style.display="none")})}function Fi(i){chrome.storage.local.get(["collectedLinks"],n=>{let e=n.collectedLinks||[];e.splice(i,1),chrome.storage.local.set({collectedLinks:e},()=>{xe(),document.getElementById("status").innerText="삭제되었습니다"})})}document.getElementById("copyAllBtn").addEventListener("click",()=>{chrome.storage.local.get(["collectedLinks"],i=>{const n=i.collectedLinks||[];if(n.length>0){const e=n.join(`
`);navigator.clipboard.writeText(e).then(()=>{document.getElementById("status").innerText=`${n.length}개 링크 복사됨`})}})});document.getElementById("clearBtn").addEventListener("click",()=>{chrome.storage.local.set({collectedLinks:[]},()=>{xe(),document.getElementById("status").innerText="장바구니가 비워졌습니다."})});document.getElementById("copyBtn").addEventListener("click",async()=>{const[i]=await chrome.tabs.query({active:!0,currentWindow:!0}),n=document.getElementById("status");n.innerText="본문 추출 중...";const e=await chrome.scripting.executeScript({target:{tabId:i.id,allFrames:!0},function:()=>({html:document.documentElement.outerHTML,url:window.location.href,title:document.title,isMain:window===top,contentLength:document.body.innerText.length})});if(!e||e.length===0){n.innerText="페이지 정보를 가져올 수 없습니다";return}let t=e[0];e.some(g=>g.result&&g.result.url.includes("blog.naver.com"))?t=e.reduce((g,y)=>g.result.contentLength>y.result.contentLength?g:y):t=e.find(g=>g.result.isMain)||e[0];const{html:s,url:l,title:o}=t.result,c=new DOMParser().parseFromString(s,"text/html"),h=new Bt.Readability(c).parse();let f="";if(h&&h.textContent){const g=new ie({headingStyle:"atx",bulletListMarker:"-"}),y=h.content?g.turndown(h.content):h.textContent;f=`# ${h.title||o}

${y}`}else{n.innerText="본문 자동 추출 실패, 전체 텍스트 복사...";const g=await chrome.scripting.executeScript({target:{tabId:i.id},function:()=>document.body.innerText});f=`# ${o}

${g[0].result}`}f+=`

---
[출처]: ${l}
[정리]: AI Nolza Extension`,navigator.clipboard.writeText(f).then(()=>{n.innerText="본문이 복사되었습니다"})});document.getElementById("youtubeBtn").addEventListener("click",async()=>{const[i]=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.scripting.executeScript({target:{tabId:i.id,allFrames:!0},function:Gi},bt)});document.getElementById("youtubeAllBtn").addEventListener("click",async()=>{const[i]=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.scripting.executeScript({target:{tabId:i.id,allFrames:!0},function:Vi},bt)});function bt(i){if(!i||i.length===0){document.getElementById("status").innerText="복사할 내용을 찾지 못했습니다";return}const n=new Set;if(i.forEach(e=>{e.result&&e.result.split(`
`).forEach(t=>{t.trim()&&n.add(t)})}),n.size>0){const e=Array.from(n).join(`
`);navigator.clipboard.writeText(e).then(()=>{document.getElementById("status").innerText=`${n.size}개 영상 링크 복사됨`})}else document.getElementById("status").innerText="복사할 내용을 찾지 못했습니다"}function Gi(){const i=Array.from(document.querySelectorAll('a[href*="/watch?v="]')),n=new Set;return i.forEach(e=>{const t=e.getBoundingClientRect();if(t.top<(window.innerHeight||document.documentElement.clientHeight)&&t.bottom>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.right>0&&t.width>0&&t.height>0){let s=e.getAttribute("href");s.includes("&")&&(s=s.split("&")[0]),n.add("https://www.youtube.com"+s)}}),Array.from(n).join(`
`)}function Vi(){const i=Array.from(document.querySelectorAll('a[href*="/watch?v="]')),n=new Set;return i.forEach(e=>{let t=e.getAttribute("href");t.includes("&")&&(t=t.split("&")[0]),n.add("https://www.youtube.com"+t)}),Array.from(n).join(`
`)}document.getElementById("donateLink").addEventListener("click",i=>{i.preventDefault();const n=document.getElementById("qrSection"),e=document.getElementById("qrCanvas");if(n.style.display==="block"){n.style.display="none";return}K.toCanvas(e,"https://qr.kakaopay.com/FThfiaUou",{width:150},function(r){r&&console.error(r),n.style.display="block",window.scrollTo(0,document.body.scrollHeight)})});
